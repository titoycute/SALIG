<!-- status_calendar.html (Can be an iframe or section) -->
<style>
    .tooltip { position: relative; display: inline-block; }
    .tooltip .tooltiptext {
        visibility: hidden; width: 200px; background-color: #333; color: #fff;
        border-radius: 6px; padding: 10px; position: absolute; z-index: 1;
        bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    .highlight-extended { background-color: #fef08a !important; } /* Yellow for Extended */
</style>

<div class="grid grid-cols-4 gap-4" id="calendar-grid">
    <!-- Generated by JS -->
</div>

<script type="module">
    import { db } from './config.js';
    import { collection, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    async function buildCalendar() {
        const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        const grid = document.getElementById('calendar-grid');
        
        // Fetch group data for hover details
        const membersSnapshot = await getDocs(collection(db, "members"));
        const members = membersSnapshot.docs.map(d => d.data());

        months.forEach(month => {
            const receiver = members.find(m => m.payoutMonth === month);
            const payers = members.filter(m => m.paidForMonth === month); // Simplified logic
            
            const monthCard = `
                <div class="p-4 bg-white rounded shadow border relative tooltip">
                    <h3 class="font-bold">${month}</h3>
                    <p class="text-blue-600 text-sm">${receiver ? receiver.name : 'No Receiver'}</p>
                    
                    <!-- Hover Detail -->
                    <div class="tooltiptext text-xs">
                        <p><strong>Pot:</strong> $${receiver ? receiver.potAmount : '0'}</p>
                        <hr class="my-1">
                        <p>Paid: ${payers.length} members</p>
                        <ul>
                            ${payers.map(p => `<li>${p.name} (${p.type})</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
            grid.innerHTML += monthCard;
        });
    }
    buildCalendar();
</script>